{"ast":null,"code":"import _slicedToArray from\"/Users/ayushsalik/Login/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Avatar from\"@material-ui/core/Avatar\";import passwordStrength from\"zxcvbn\";import Button from\"@material-ui/core/Button\";import CssBaseline from\"@material-ui/core/CssBaseline\";import TextField from\"@material-ui/core/TextField\";import FormControlLabel from\"@material-ui/core/FormControlLabel\";import Checkbox from\"@material-ui/core/Checkbox\";import Link from\"@material-ui/core/Link\";import Grid from\"@material-ui/core/Grid\";import Box from\"@material-ui/core/Box\";import LockOutlinedIcon from\"@material-ui/icons/LockOutlined\";import Typography from\"@material-ui/core/Typography\";import{makeStyles}from\"@material-ui/core/styles\";import Container from\"@material-ui/core/Container\";import Axios from\"axios\";import{useHistory}from\"react-router-dom\";import api from\"../utils/config\";import PasswordStrengthBar from\"react-password-strength-bar\";import Notif from\"../utils/Notification.component\";function Copyright(){return/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",color:\"textSecondary\",align:\"center\"},\"Copyright © \",/*#__PURE__*/React.createElement(Link,{color:\"inherit\",href:\"https://material-ui.com/\"},\"Your Website\"),\" \",new Date().getFullYear(),\".\");}var useStyles=makeStyles(function(theme){return{paper:{marginTop:theme.spacing(8),display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main},form:{width:\"100%\",// Fix IE 11 issue.\nmarginTop:theme.spacing(1)},submit:{margin:theme.spacing(3,0,2)}};});export default function Register(){var classes=useStyles();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),emailHelper=_useState4[0],setEmailHelper=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),emailError=_useState6[0],setEmailError=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),cpassword=_useState10[0],setCpassword=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),firstName=_useState12[0],setFirstName=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),lastName=_useState14[0],setLastName=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),passwordHelperText=_useState16[0],setPasswordHelperText=_useState16[1];var _useState17=useState(true),_useState18=_slicedToArray(_useState17,2),passwordsMatch=_useState18[0],setPasswordsMatch=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),passwordScore=_useState20[0],setPasswordScore=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),notifMessage=_useState22[0],setNotifMessage=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),notifOpen=_useState24[0],setNotifOpen=_useState24[1];var history=useHistory();var validateEmail=function validateEmail(email){var re=/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;return email===\"\"||re.test(String(email).toLowerCase());};var sendNotif=function sendNotif(message){setNotifMessage(message);setNotifOpen(true);};React.useEffect(function(){var value=validateEmail(email);if(!value){setEmailHelper(\"Please enter a valid email\");}else{setEmailHelper(\"\");}setEmailError(!value);},[email]);React.useEffect(function(){var match=cpassword===\"\"||cpassword===password;if(!match){setPasswordHelperText(\"Passwords don't match\");setPasswordsMatch(false);}else{setPasswordHelperText(\"\");setPasswordsMatch(true);}},[cpassword,password]);var register=function register(e){e.preventDefault();var fields=[firstName,lastName,email,password];var emptyFields=fields.filter(function(field){return field===\"\";});if(emptyFields.length>0){sendNotif(\"Please fill all the fields\");return;}if(emailError){sendNotif(\"Please enter a valid email\");return;}if(passwordScore<2){sendNotif(\"Please enter a stronger password\");return;}Axios.post(api.register,{user:{email:email,password:password,firstName:firstName,lastName:lastName}}).then(function(res){if(res.data.email===\"Already exists\"){sendNotif(\"This email already exists\");}else if(res.status===200){history.push(\"/login\");}return;});};return/*#__PURE__*/React.createElement(Container,{component:\"main\",maxWidth:\"xs\"},/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(\"div\",{className:classes.paper},/*#__PURE__*/React.createElement(Avatar,{className:classes.avatar},/*#__PURE__*/React.createElement(LockOutlinedIcon,null)),/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"Register\"),/*#__PURE__*/React.createElement(\"form\",{autoComplete:\"new-password\",className:classes.form,noValidate:true},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,label:\"First Name\",name:\"firstName\",value:firstName,onChange:function onChange(e){return setFirstName(e.target.value);},autoComplete:\"given-name\"}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,label:\"Last Name\",name:\"lastName\",value:lastName,onChange:function onChange(e){return setLastName(e.target.value);},autoComplete:\"family-name\"}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,error:emailError,fullWidth:true,label:\"Email Address\",name:\"email\",helperText:emailHelper,value:email,onChange:function onChange(e){return setEmail(e.target.value);},autoComplete:\"email\"}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"new-password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},label:\"Password\",type:\"password\",id:\"new-password\",autoComplete:\"new-password\"}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,error:!passwordsMatch,name:\"confirmPassword\",value:cpassword,helperText:passwordHelperText,onChange:function onChange(e){return setCpassword(e.target.value);},label:\" Confirm Password\",type:\"password\",autoComplete:\"new-password\"}),password.length>0?/*#__PURE__*/React.createElement(PasswordStrengthBar,{password:password,onChangeScore:function onChangeScore(score){setPasswordScore(score);console.log(score);}}):/*#__PURE__*/React.createElement(\"p\",null),/*#__PURE__*/React.createElement(Button,{fullWidth:true,variant:\"contained\",color:\"primary\",onClick:register,className:classes.submit},\"Register!\"),/*#__PURE__*/React.createElement(Grid,{container:true},/*#__PURE__*/React.createElement(Grid,{item:true,xs:true},/*#__PURE__*/React.createElement(Link,{href:\"/login\",variant:\"body2\"},\"Already have an account? Log in\")),/*#__PURE__*/React.createElement(Grid,{item:true})))),/*#__PURE__*/React.createElement(Box,{mt:8},/*#__PURE__*/React.createElement(Copyright,null)),/*#__PURE__*/React.createElement(Notif,{message:notifMessage,open:notifOpen,handle:setNotifOpen}));}","map":{"version":3,"sources":["/Users/ayushsalik/Login/Client/src/Login/Register.component.js"],"names":["React","useState","Avatar","passwordStrength","Button","CssBaseline","TextField","FormControlLabel","Checkbox","Link","Grid","Box","LockOutlinedIcon","Typography","makeStyles","Container","Axios","useHistory","api","PasswordStrengthBar","Notif","Copyright","Date","getFullYear","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","Register","classes","email","setEmail","emailHelper","setEmailHelper","emailError","setEmailError","password","setPassword","cpassword","setCpassword","firstName","setFirstName","lastName","setLastName","passwordHelperText","setPasswordHelperText","passwordsMatch","setPasswordsMatch","passwordScore","setPasswordScore","notifMessage","setNotifMessage","notifOpen","setNotifOpen","history","validateEmail","re","test","String","toLowerCase","sendNotif","message","useEffect","value","match","register","e","preventDefault","fields","emptyFields","filter","field","length","post","user","then","res","data","status","push","target","score","console","log"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport passwordStrength from \"zxcvbn\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Link from \"@material-ui/core/Link\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Box from \"@material-ui/core/Box\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport Axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport api from \"../utils/config\";\nimport PasswordStrengthBar from \"react-password-strength-bar\";\nimport Notif from \"../utils/Notification.component\";\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {\"Copyright © \"}\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\n        Your Website\n      </Link>{\" \"}\n      {new Date().getFullYear()}\n      {\".\"}\n    </Typography>\n  );\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: \"100%\", // Fix IE 11 issue.\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}));\n\nexport default function Register() {\n  const classes = useStyles();\n  const [email, setEmail] = useState(\"\");\n  const [emailHelper, setEmailHelper] = useState(\"\");\n  const [emailError, setEmailError] = useState(false);\n  const [password, setPassword] = useState(\"\");\n  const [cpassword, setCpassword] = useState(\"\");\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [passwordHelperText, setPasswordHelperText] = useState(\"\");\n  const [passwordsMatch, setPasswordsMatch] = useState(true);\n  const [passwordScore, setPasswordScore] = useState(0);\n  const [notifMessage, setNotifMessage] = useState(\"\");\n  const [notifOpen, setNotifOpen] = useState(false);\n\n  let history = useHistory();\n\n  const validateEmail = function(email) {\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return email === \"\" || re.test(String(email).toLowerCase());\n  };\n\n  const sendNotif = function(message) {\n    setNotifMessage(message);\n    setNotifOpen(true);\n  };\n\n  React.useEffect(() => {\n    let value = validateEmail(email);\n    if (!value) {\n      setEmailHelper(\"Please enter a valid email\");\n    } else {\n      setEmailHelper(\"\");\n    }\n    setEmailError(!value);\n  }, [email]);\n\n  React.useEffect(() => {\n    let match = cpassword === \"\" || cpassword === password;\n    if (!match) {\n      setPasswordHelperText(\"Passwords don't match\");\n      setPasswordsMatch(false);\n    } else {\n      setPasswordHelperText(\"\");\n      setPasswordsMatch(true);\n    }\n  }, [cpassword, password]);\n\n  const register = function(e) {\n    e.preventDefault();\n    let fields = [firstName, lastName, email, password];\n    let emptyFields = fields.filter(field => field === \"\");\n\n    if (emptyFields.length > 0) {\n      sendNotif(\"Please fill all the fields\");\n      return;\n    }\n\n    if (emailError) {\n      sendNotif(\"Please enter a valid email\");\n      return;\n    }\n    if (passwordScore < 2) {\n      sendNotif(\"Please enter a stronger password\");\n\n      return;\n    }\n\n    Axios.post(api.register, {\n      user: {\n        email: email,\n        password: password,\n        firstName: firstName,\n        lastName: lastName\n      }\n    }).then(res => {\n      if (res.data.email === \"Already exists\") {\n        sendNotif(\"This email already exists\");\n      }\n      else if (res.status === 200) {\n        history.push(\"/login\");\n      }\n      return;\n    });\n  };\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Register\n        </Typography>\n        <form autoComplete=\"new-password\" className={classes.form} noValidate>\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            label=\"First Name\"\n            name=\"firstName\"\n            value={firstName}\n            onChange={e => setFirstName(e.target.value)}\n            autoComplete=\"given-name\"\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            label=\"Last Name\"\n            name=\"lastName\"\n            value={lastName}\n            onChange={e => setLastName(e.target.value)}\n            autoComplete=\"family-name\"\n          />\n\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            error={emailError}\n            fullWidth\n            label=\"Email Address\"\n            name=\"email\"\n            helperText={emailHelper}\n            value={email}\n            onChange={e => setEmail(e.target.value)}\n            autoComplete=\"email\"\n          />\n\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            name=\"new-password\"\n            value={password}\n            onChange={e => setPassword(e.target.value)}\n            label=\"Password\"\n            type=\"password\"\n            id=\"new-password\"\n            autoComplete=\"new-password\"\n          />\n\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            error={!passwordsMatch}\n            name=\"confirmPassword\"\n            value={cpassword}\n            helperText={passwordHelperText}\n            onChange={e => setCpassword(e.target.value)}\n            label=\" Confirm Password\"\n            type=\"password\"\n            autoComplete=\"new-password\"\n          />\n          {password.length > 0 ? (\n            <PasswordStrengthBar\n              password={password}\n              onChangeScore={score => {\n                setPasswordScore(score);\n                console.log(score);\n              }}\n            />\n          ) : (\n            <p />\n          )}\n\n          <Button\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={register}\n            className={classes.submit}\n          >\n            Register!\n          </Button>\n          <Grid container>\n            <Grid item xs>\n              <Link href=\"/login\" variant=\"body2\">\n                {\"Already have an account? Log in\"}\n              </Link>\n            </Grid>\n            <Grid item></Grid>\n          </Grid>\n        </form>\n      </div>\n      <Box mt={8}>\n        <Copyright />\n      </Box>\n      <Notif message={notifMessage} open={notifOpen} handle={setNotifOpen} />\n    </Container>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}